(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"2hhW":function(e,t,a){e.exports={keyword:"antd-pro-pages-system-notice-style-keyword",query:"antd-pro-pages-system-notice-style-query",pagination:"antd-pro-pages-system-notice-style-pagination"}},HalI:function(e,t,a){"use strict";var n=a("fbTi"),l=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("yS+l");var o=l(a("GZKk"));a("bbjC");var i=l(a("kjHK"));a("qcmJ");var c=l(a("WR96"));a("sgyy");var r=l(a("wY5t"));a("bki4");var s=l(a("a64t"));a("5Toi");var u=l(a("S49w")),d=l(a("mK77")),f=l(a("43Yg")),p=l(a("/tCh")),m=l(a("scpF")),g=l(a("O/V9")),h=l(a("Tfcp")),y=l(a("8aBX"));a("9XEU");var v=l(a("lK/G"));a("EeUs");var k=l(a("MmNm"));a("HeWP");var w=l(a("aQmy"));a("O7+F");var E=l(a("QGS2")),b=n(a("i9FB")),C=a("LneV"),D=a("KEjf"),O=l(a("2hhW")),A=function(e,t,a,n){var l,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(i=(o<3?l(i):o>3?l(t,a,i):l(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i},S=E.default.confirm,j=w.default.TextArea,I=k.default.Option,M=v.default.Item,N={labelCol:{span:5},wrapperCol:{span:18}},T=function(e){function t(e){var a;return(0,f.default)(this,t),a=(0,m.default)(this,(0,g.default)(t).call(this,e)),a.getData=function(){var e=a.state.search;a.props.dispatch({type:"notice/list",payload:(0,d.default)({},e)})},a.onChange=function(e){a.setState({search:(0,d.default)({},a.state.search,e)},function(){a.getData()})},a.onReset=function(){a.setState({search:{offset:1,limit:10}},function(){a.getData()})},a.addNotice=function(){a.setState({noticeModal:{modal:!0,noticeActive:{},isAddNotice:!0}})},a.editor=function(e){a.setState({noticeModal:{modal:!0,noticeActive:e,isAddNotice:!1}})},a.upDown=function(e){var t=a.props.dispatch,n=(0,h.default)(a),l="",o="";0===e.status?(l=1,o="\u516c\u544a\u53d1\u5e03\u6210\u529f!"):(l=0,o="\u516c\u544a\u5df2\u5931\u6548!"),S({title:"\u63d0\u793a",content:b.default.createElement("span",null,1===l?"\u786e\u8ba4\u53d1\u5e03\u8be5\u516c\u544a\uff1f":"\u786e\u8ba4\u53d6\u6d88\u8be5\u516c\u544a\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t({type:"notice/enable",payload:{noticeID:e.noticeID,status:l},callback:function(e){200===e.code?(u.default.success({message:o,duration:1.5}),n.getData()):e.message&&u.default.error({message:"".concat(e.message),duration:1.5})}})}})},a.noticeOk=function(e){e.preventDefault();var t=(0,h.default)(a);a.props.form.validateFields(function(e,n){if(!e){var l=null,o="";a.state.noticeModal.isAddNotice?(l="notice/add",o="\u6dfb\u52a0\u6210\u529f!"):(l="notice/edit",o="\u4fee\u6539\u6210\u529f!",n.noticeID=a.state.noticeModal.noticeActive.noticeID),a.props.dispatch({type:l,payload:(0,d.default)({},n),callback:function(e){200===e.code?(u.default.success({message:o,duration:1.5}),t.getData(),t.noticeCancel()):e.message&&u.default.error({message:"".concat(e.message),duration:1.5})}})}})},a.noticeCancel=function(){a.setState({noticeModal:{modal:!1,noticeActive:{},isAddNotice:!0}})},a.state={search:{limit:10,offset:1},noticeModal:{modal:!1,noticeActive:{},isAddNotice:!1}},a}return(0,y.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,n=a.notice,l=a.loading,u=this.state,d=u.search,f=u.noticeModal,p=f.noticeActive,m=b.default.createElement(s.default,{type:"primary",onClick:this.addNotice},"\u53d1\u5e03\u516c\u544a"),g=[{title:"\u6807\u9898",dataIndex:"title",key:"title"},{title:"\u5185\u5bb9",dataIndex:"content",key:"content"},{title:"\u53d1\u5e03\u65f6\u95f4",key:"time",render:function(e){return b.default.createElement("span",null,new Date(1e3*parseInt(0===e.updateTime?e.createTime:e.updateTime)).toLocaleString().replace(/:\d{1,2}$/,""))}},{title:"\u64cd\u4f5c",key:"operation",render:function(t){return b.default.createElement("span",null,b.default.createElement("a",{onClick:function(){return e.editor(t)}},"\u4fee\u6539"),b.default.createElement(r.default,{type:"vertical"}),b.default.createElement("a",{onClick:function(){return e.upDown(t)}},1===t.status?"\u5931\u6548":"\u53d1\u5e03"))}}];return b.default.createElement(D.PageHeaderWrapper,{extra:m},b.default.createElement(c.default,null,b.default.createElement(i.default,{columns:g,dataSource:n.list,loading:l,pagination:!1,rowKey:function(e){return e.noticeID}}),b.default.createElement(o.default,{className:O.default.pagination,total:n.total,current:d.offset,showSizeChanger:!0,showQuickJumper:!0,onChange:function(t){return e.onChange({offset:t})},onShowSizeChange:function(t,a){return e.onChange({offset:1,limit:a})}})),b.default.createElement(E.default,{title:f.isAddNotice?"\u65b0\u5efa\u516c\u544a":"\u4fee\u6539\u516c\u544a",visible:f.modal,destroyOnClose:!0,maskClosable:!1,onOk:this.noticeOk,onCancel:this.noticeCancel,width:460},b.default.createElement("div",null,b.default.createElement(M,Object.assign({},N,{label:"\u516c\u544a\u6807\u9898"}),t("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u516c\u544a\u6807\u9898!"}],initialValue:p.title})(b.default.createElement(w.default,{style:{width:300}}))),b.default.createElement(M,Object.assign({},N,{label:"\u5185\u5bb9"}),t("content",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5185\u5bb9!"}],initialValue:p.content})(b.default.createElement(j,{rows:4,style:{width:300}}))),b.default.createElement(M,Object.assign({},N,{label:"\u72b6\u6001"}),t("status",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u516c\u544a\u72b6\u6001!"}],initialValue:p.status})(b.default.createElement(k.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:300}},b.default.createElement(I,{value:1},"\u53d1\u5e03"),b.default.createElement(I,{value:0},"\u5931\u6548")))))))}}]),t}(b.Component);T=A([v.default.create(),(0,C.connect)(function(e){var t=e.notice,a=e.loading;return{notice:t,loading:a.effects["notice/list"]}})],T);var x=T;t.default=x}}]);