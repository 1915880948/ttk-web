(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{"4AfL":function(e,t,a){e.exports={keyword:"antd-pro-pages-team-version-style-keyword",type:"antd-pro-pages-team-version-style-type",query:"antd-pro-pages-team-version-style-query",pagination:"antd-pro-pages-team-version-style-pagination"}},CVUJ:function(e,t,a){"use strict";var l=a("fbTi"),n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("0PqH");var r=n(a("0PS4"));a("O7+F");var u=n(a("QGS2"));a("yS+l");var s=n(a("GZKk"));a("bbjC");var d=n(a("kjHK"));a("sgyy");var i=n(a("wY5t"));a("neM1");var o=n(a("xyFX"));a("GXKo");var c=n(a("J4k6"));a("qcmJ");var f=n(a("WR96"));a("bki4");var p=n(a("a64t"));a("5Toi");var m=n(a("S49w")),v=n(a("mK77")),g=n(a("43Yg")),y=n(a("/tCh")),h=n(a("scpF")),E=n(a("O/V9")),C=n(a("Tfcp")),w=n(a("8aBX"));a("9XEU");var k=n(a("lK/G"));a("hKJ8");var b=n(a("Eau0"));a("EeUs");var x=n(a("MmNm"));a("HeWP");var O=n(a("aQmy")),V=l(a("i9FB")),A=a("LneV"),D=a("KEjf"),F=n(a("4AfL")),S=function(e,t,a,l){var n,r=arguments.length,u=r<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,a):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)u=Reflect.decorate(e,t,a,l);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(u=(r<3?n(u):r>3?n(t,a,u):n(t,a))||u);return r>3&&u&&Object.defineProperty(t,a,u),u},j=O.default.TextArea,_=x.default.Option,q=(b.default.RangePicker,k.default.Item),M={labelCol:{span:5},wrapperCol:{span:18}},I=function(e){function t(e){var a;return(0,g.default)(this,t),a=(0,h.default)(this,(0,E.default)(t).call(this,e)),a.getData=function(){var e=a.state.search;a.props.dispatch({type:"version/versionList",payload:(0,v.default)({},e)})},a.onChange=function(e){a.setState({search:(0,v.default)({},a.state.search,e)},function(){a.getData()})},a.onReset=function(){a.setState({search:{name:"",type:"",version:"",isForce:"",current_page:1,per_page:10}},function(){a.getData()})},a.onAdd=function(){a.setState({versionModal:{modal:!0,versionActive:{},isAddVersion:!0}})},a.editor=function(e){a.props.dispatch({type:"version/toDetail",payload:{id:e.id},callback:function(e){200===e.code&&a.setState({versionModal:{modal:!0,versionActive:a.props.version.versionDetail,isAddVersion:!1}})}})},a.addOk=function(e){var t=a.state.versionModal,l=(0,C.default)(a);e.preventDefault(),a.props.form.validateFields(function(e,a){e||(a.type=parseInt(a.type),a.isForce=parseInt(a.isForce),t.isAddVersion||(a.id=t.versionActive.id),t.isAddVersion?l.props.dispatch({type:"version/add",payload:(0,v.default)({},a),callback:function(e){200===e.code?(m.default.success({message:"\u6dfb\u52a0\u6210\u529f!",duration:1.5}),l.getData(),l.onCancel()):m.default.error({message:"\u6dfb\u52a0\u5931\u8d25!",duration:1.5})}}):l.props.dispatch({type:"version/edit",payload:(0,v.default)({},a),callback:function(e){200===e.code?(m.default.success({message:"\u4fee\u6539\u6210\u529f!",duration:1.5}),l.getData(),l.onCancel()):m.default.error({message:"\u4fee\u6539\u5931\u8d25!",duration:1.5})}}))})},a.onCancel=function(){a.setState({versionModal:{modal:!1,versionActive:{},isAddVersion:!0}})},a.state={search:{name:"",type:"",version:"",isForce:"",current_page:1,per_page:10},versionModal:{modal:!1,versionActive:{},isAddVersion:!0}},a}return(0,w.default)(t,e),(0,y.default)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.props.loading,a=this.state,l=a.search,n=a.versionModal,m=n.versionActive,v=this.props.form.getFieldDecorator,g=V.default.createElement(p.default,{type:"primary",onClick:this.onAdd},"\u6dfb\u52a0\u7248\u672c"),y=[{title:"\u7248\u672c\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u7c7b\u578b",key:"type",render:function(e){return V.default.createElement("span",null,1===parseInt(e.type)?"ios":"android")}},{title:"\u7248\u672c\u53f7",dataIndex:"version",key:"version"},{title:"\u66f4\u65b0\u5730\u5740",dataIndex:"url",key:"url"},{title:"\u66f4\u65b0\u7c7b\u578b",key:"isForce",render:function(e){return V.default.createElement("span",null,1===parseInt(e.isForce)?"\u5f3a\u5236\u66f4\u65b0":2===parseInt(e.isForce)?"\u63a8\u8350\u66f4\u65b0":"\u4e0d\u66f4\u65b0")}},{title:"\u53d1\u5e03\u65f6\u95f4",key:"createTime",render:function(e){return V.default.createElement("span",null,new Date(1e3*parseInt(e.createTime)).toLocaleString().replace(/:\d{1,2}$/,""))}},{title:"\u64cd\u4f5c",key:"operation",render:function(t){return V.default.createElement("span",null,V.default.createElement("a",{onClick:function(){return e.editor(t)}},"\u4fee\u6539"))}}];return V.default.createElement(D.PageHeaderWrapper,{extra:g},V.default.createElement(f.default,null,V.default.createElement(c.default,null,V.default.createElement(o.default,{xxl:8,xl:8,lg:8,md:8,sm:8},V.default.createElement("span",null,"\u7248\u672c\u540d\u79f0"),V.default.createElement(O.default,{placeholder:"\u8bf7\u8f93\u5165",className:F.default.keyword,allowClear:!0,value:l.name,onChange:function(t){return e.onChange({name:t.target.value.replace(/(^\s*)|(\s*$)/g,""),current_page:1})},onPressEnter:this.getData})),V.default.createElement(o.default,{xxl:8,xl:8,lg:8,md:8,sm:8},V.default.createElement("span",null,"\u7248\u672c\u53f7"),V.default.createElement(O.default,{placeholder:"\u8bf7\u8f93\u5165",className:F.default.keyword,allowClear:!0,value:l.version,onChange:function(t){return e.onChange({version:t.target.value.replace(/(^\s*)|(\s*$)/g,""),current_page:1})},onPressEnter:this.getData})),V.default.createElement(o.default,{xxl:8,xl:8,lg:8,md:8,sm:8},V.default.createElement("span",null,"\u7c7b\u578b"),V.default.createElement(x.default,{defaultValue:"",className:F.default.type,dropdownClassName:F.default.type,value:l.type,onChange:function(t){return e.onChange({type:t,current_page:1})}},V.default.createElement(_,{value:""},"\u5168\u90e8"),V.default.createElement(_,{value:1},"ios"),V.default.createElement(_,{value:2},"android")))),V.default.createElement(c.default,{style:{marginTop:20}},V.default.createElement(o.default,{xxl:8,xl:8,lg:8,md:8,sm:8},V.default.createElement("span",null,"\u66f4\u65b0\u7c7b\u578b"),V.default.createElement(x.default,{defaultValue:"",className:F.default.type,dropdownClassName:F.default.type,value:l.isForce,onChange:function(t){return e.onChange({isForce:t,current_page:1})}},V.default.createElement(_,{value:""},"\u5168\u90e8"),V.default.createElement(_,{value:1},"\u5f3a\u5236\u66f4\u65b0"),V.default.createElement(_,{value:2},"\u63a8\u8350\u66f4\u65b0"),V.default.createElement(_,{value:3},"\u4e0d\u66f4\u65b0"))),V.default.createElement(o.default,{xxl:8,xl:8,lg:8,md:8,sm:8},V.default.createElement(p.default,{type:"primary",className:F.default.query,onClick:this.getData},"\u67e5\u8be2"),V.default.createElement(p.default,{type:"primary",className:F.default.query,onClick:this.onReset},"\u91cd\u7f6e"))),V.default.createElement(i.default,{dashed:!0}),V.default.createElement(c.default,null,V.default.createElement(d.default,{columns:y,dataSource:this.props.version.list,loading:t,pagination:!1,rowKey:function(e){return e.id}}),V.default.createElement(s.default,{className:F.default.pagination,total:this.props.version.total,current:l.current_page,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"\u603b\u5171 ".concat(e," \u6761")},onChange:function(t){return e.onChange({current_page:t})},onShowSizeChange:function(t,a){return e.onChange({current_page:1,per_page:a})},pageSizeOptions:["10","200","500","1000"]}))),V.default.createElement(u.default,{title:n.isAddVersion?"\u6dfb\u52a0\u7248\u672c":"\u4fee\u6539\u7248\u672c",visible:n.modal,destroyOnClose:!0,maskClosable:!1,onOk:this.addOk,onCancel:this.onCancel,width:460},V.default.createElement("div",null,V.default.createElement(q,Object.assign({},M,{label:"\u7248\u672c\u540d\u79f0"}),v("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7248\u672c\u540d\u79f0!"}],initialValue:m.name})(V.default.createElement(O.default,{style:{width:300}}))),V.default.createElement(q,Object.assign({},M,{label:"\u7248\u672c\u53f7"}),v("version",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7248\u672c\u53f7!"}],initialValue:m.version})(V.default.createElement(O.default,{style:{width:300}}))),V.default.createElement(q,Object.assign({},M,{label:"\u7c7b\u578b"}),v("type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9!"}],initialValue:m.type})(V.default.createElement(x.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:300}},V.default.createElement(_,{value:1},"ios"),V.default.createElement(_,{value:2},"android")))),V.default.createElement(q,Object.assign({},M,{label:"\u66f4\u65b0\u5730\u5740"}),v("url",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7248\u672c\u66f4\u65b0\u5730\u5740!"}],initialValue:m.url})(V.default.createElement(O.default,{style:{width:300}}))),V.default.createElement(q,Object.assign({},M,{label:"\u66f4\u65b0\u7c7b\u578b"}),v("isForce",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9!"}],initialValue:m.type})(V.default.createElement(x.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:300}},V.default.createElement(_,{value:1},"\u5f3a\u5236\u66f4\u65b0"),V.default.createElement(_,{value:2},"\u63a8\u8350\u66f4\u65b0"),V.default.createElement(_,{value:3},"\u4e0d\u66f4\u65b0")))),V.default.createElement(q,Object.assign({},M,{label:"\u5927\u5c0f(MB)"}),v("size",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7248\u672c\u5305\u5927\u5c0f!"}],initialValue:m.size})(V.default.createElement(r.default,{min:0,style:{width:300}}))),V.default.createElement(q,Object.assign({},M,{label:"\u7248\u672c\u8bf4\u660e"}),v("desc",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7248\u672c\u8bf4\u660e!"}],initialValue:m.desc})(V.default.createElement(j,{rows:4,style:{width:300}}))))))}}]),t}(V.Component);I=S([k.default.create(),(0,A.connect)(function(e){var t=e.version,a=e.loading;return{version:t,loading:a.effects["version/versionList"]}})],I);var N=I;t.default=N}}]);